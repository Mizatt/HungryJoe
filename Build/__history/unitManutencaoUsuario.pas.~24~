unit unitManutencaoUsuario;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, unitBase, FireDAC.Stan.Intf,
  FireDAC.Stan.Option, FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS,
  FireDAC.Phys.Intf, FireDAC.DApt.Intf, FireDAC.Stan.Async, FireDAC.DApt,
  Data.DB, FireDAC.Comp.DataSet, FireDAC.Comp.Client, System.Actions,
  Vcl.ActnList, System.ImageList, Vcl.ImgList, Vcl.StdCtrls, Vcl.ExtCtrls,
  Vcl.CategoryButtons, Vcl.WinXCtrls, Vcl.Imaging.pngimage, Vcl.Mask,
  Vcl.DBCtrls, Vcl.Buttons;

type
  TformManutencaoUsuario = class(TformBasico)
    GroupBox2: TGroupBox;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    Image1: TImage;
    FDQueryUsuarios: TFDQuery;
    DSUsuarios: TDataSource;
    Switch: TToggleSwitch;
    Label5: TLabel;
    nomeDoUsuario: TEdit;
    loginDoUsuario: TEdit;
    senhaDoUsuario: TEdit;
    FDTabelaID: TFDAutoIncField;
    FDTabelaUSU_NOME: TStringField;
    FDTabelaUSU_SENHA: TStringField;
    FDTabelaUSU_LOGIN: TStringField;
    FDTabelaUSU_ID_PERFIL: TIntegerField;
    FDTabelaSTATUS: TStringField;
    procedure FormActivate(Sender: TObject);
    procedure SpeedButton1Click(Sender: TObject);
    procedure actSairExecute(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  formManutencaoUsuario: TformManutencaoUsuario;

implementation

{$R *.dfm}

uses unitDM, unitMenuPrincipal, unitMenuPrincipal2;

procedure TformManutencaoUsuario.actSairExecute(Sender: TObject);
begin
  formMenuPrincipal2.Show;
  formManutencaoUsuario.Close;
  inherited;
end;

procedure TformManutencaoUsuario.FormActivate(Sender: TObject);
begin
  formMenuPrincipal2.Close;
  FDTabela.TableName := 'Usuario';
  FDTabela.Open();
   if FDTabela.Active = False then
    begin
      FDTabela.Open;
    end;
  FDTabela.Insert;
  inherited;
end;

procedure TformManutencaoUsuario.SpeedButton1Click(Sender: TObject);
var mensagem, QuerySQL: String;
begin
  FDTabelaUSU_NOME.AsString := nomeDoUsuario.Text;
  FDTabelaUSU_LOGIN.AsString := loginDoUsuario.Text;
  FDTabelaUSU_SENHA.AsString := senhaDoUsuario.Text;
  if Switch.State = tssOn then
  begin
    senhaDoUsuario.PasswordChar := #0;
  end
  else
    senhaDoUsuario.PasswordChar := '*';
end;


end.
